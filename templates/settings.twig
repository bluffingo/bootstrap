{% extends "_layout.twig" %}

{% block title %}Settings{% endblock %}

{% block content %}
    <h1>Settings</h1>

    {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endif %}

    <div class="card">
        <div class="card-body">
            <form action="/settings" method="post" enctype="multipart/form-data">
                <div class="mb-4">
                    <h2 class="h5 mb-3">Profile</h2>

                    <div class="mb-3">
                        <label for="settings-display-name-input" class="form-label">Profile name:</label>
                        <input class="form-control" id="settings-display-name-input" type="text" name="title" maxlength="50" value="{{ user_data.title }}">
                    </div>

                    <div class="mb-3">
                        <label for="about" class="form-label">Profile description:</label>
                        <textarea class="form-control" name="about" rows="4" wrap="hard">{{ user_data.about }}</textarea>
                    </div>

                    <div class="mb-3">
                        <label for="setting-pfp" class="form-label">Profile picture:</label>
                        <input type="file" name="profilePicture" id="setting-pfp" class="form-control">
                    </div>

                    <div class="mb-3">
                        <label for="settings-banner" class="form-label">Profile banner:</label>
                        <input type="file" name="profileBanner" id="settings-banner" class="form-control">
                    </div>

                    <div class="mb-3">
                        <label for="settings-color" class="form-label">Profile color:</label>
                        <input name="userlink_color" id="settings-color" type="color" class="form-control form-control-color"
                               value="{{ user_data.userlink_color | default('#0069B4') }}">
                    </div>
                </div>

                <hr class="my-4">

                <div class="mb-4">
                    <h2 class="h5 mb-3">Security</h2>

                    <div class="mb-3">
                        <label for="current_pass" class="form-label">Current password:</label>
                        <input class="form-control" type="password" name="current_pass" size="30" maxlength="256"
                               placeholder="Current password">
                    </div>

                    <h3 class="h6 mt-4 mb-3">Change username</h3>
                    <div class="mb-3">
                        <label for="new_username" class="form-label">New username:</label>
                        <input class="form-control" type="text" name="new_username" size="30" maxlength="256"
                               placeholder="New username">
                    </div>

                    <h3 class="h6 mt-4 mb-3">Change password</h3>
                    <div class="mb-3">
                        <label for="pass" class="form-label">New password:</label>
                        <input class="form-control" type="password" name="pass" size="30" maxlength="256" placeholder="New password">
                    </div>

                    <div class="mb-3">
                        <label for="pass2" class="form-label">Confirm new password:</label>
                        <input class="form-control" type="password" name="pass2" size="30" maxlength="256"
                               placeholder="Confirm new password">
                    </div>
                </div>

                <hr class="my-4">

                <div class="mb-4">
                    <h2 class="h5 mb-3">Filtering</h2>

                    {% if not is_chaziz_sb %}
                        {% if isUserOver18 %}
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" name="rating" id="rating" value="true"
                                       {% if user_data.comfortable_rating == "mature" %}checked{% endif %}>
                                <label class="form-check-label" for="rating"> {% if is_opensb_v1_3 %}Enable adult content{% else %}Enable sensitive content{% endif %}</label>
                            </div>

                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" name="rating" id="rating" value="true">
                                <label class="form-check-label" for="rating"> Block profile/upload access from people under 18</label>
                            </div>
                        {% else %}
                            <div class="alert alert-danger">
                                Based on your account's birthdate, access to mature-rated content is restricted.
                                If you entered an incorrect birthdate, please contact {{ website_branding.name }}
                                administration.
                            </div>
                        {% endif %}
                    {% endif %}

                    <h3 class="h6 mb-3">Blocked tags</h3>
                    <textarea class="form-control" name="blacklisted_tags" rows="5" cols="80" wrap="hard">{% for tag in user_data.blacklisted_tags %}{{ tag }},{% endfor %}</textarea>
                </div>

                <div class="text-end">
                    <input type="submit" id="upload" name="save" class="btn btn-primary"
                           value="Save">
                </div>
            </form>
        </div>
    </div>
{% endblock %}