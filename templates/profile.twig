{% extends "_layout.twig" %}

{% block title %}{{ data.username }}{% endblock %}

	{% block head %}
    <script>
        user_id = '{{ data.id }}';
    </script>
    {% endblock %}

	{% block precontent %}
    <style>
        {{ data.bootstrap_profile_css }}

        .bg-channel-background {
            margin-top: -1.5rem; /* KINDA UGLY */
        }
    </style>
    <div class="bg-channel-background">
        <div class="col-12 mb-2 mt-0">
            <div class="p-1 bg-custom-profile text-white">
                <div class="container py-4">
                    <div class="row">
                        <div class="col-md-12">
                            <img class="float-start rounded-circle me-3"
                                    src="{{ profile_picture(data.username) }}"
                                    width="150" alt="pfp">
                            <h1 class="align-top fw-bold mb-0">
                                {{ data.displayname }}
                                {% if data.is_staff %}{{ icon("shield", 32) }}{% endif %}
                            </h1>
                            <div class="fs-4">@{{ data.username }}</div>
                            <p class="fs-6 text-break">{{ data.about }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endblock %}

    {% block content %}
    <div class="row">
        <!-- This prevents the user info box from being extremely tall. Box probably needs to be redesigned... -->
        <div class="col-md-8 order-2 order-md-1">
            <div class="card mb-2">
                <div class="card-body">
                    <h3>{{ localize('uploads') }}</h3>
                    {% for submission in data.submissions %}
                        {{ include('/components/smallvideobox.twig') }}
                    {% else %}
                        <p>There are currently no uploads by {{ data.username }}.</p>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="col-md-4 order-1 order-md-2">
            <div class="card mb-2">
                <div class="card-body">
                    <h4>About {{ data.username }}</h4>
                    <hr>
                    <dl class="row mb-0">
                        <dt class="col-auto">Joined</dt>
                        <dd class="col-auto">{{ data.joined | relative_time() }}</dd>
                    </dl>
                    <dl class="row mb-0">
                        <dt class="col-auto">Last seen</dt>
                        <dd class="col-auto">{{ data.connected | relative_time }}</dd>
                    </dl>
                </div>
            </div>
            <div class="card mb-2">
                <div class="card-body">
                    <h3>{{ localize('journals') }}</h3>
                    {% for journal in data.journals %}
                        {{ include('/components/journal.twig') }}
                    {% else %}
                        <p>There are currently no journals by {{ data.username }}.</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% endblock %}
